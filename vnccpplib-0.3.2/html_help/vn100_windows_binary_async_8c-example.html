<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.4"/>
<title>VectorNav C/C++ Library: vn100_windows_binary_async.c</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/javascript">
  $(document).ready(function() { searchBox.OnSelectItem(0); });
</script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td style="padding-left: 0.5em;">
   <div id="projectname">VectorNav C/C++ Library
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.4 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li><a href="pages.html"><span>Related&#160;Pages</span></a></li>
      <li><a href="modules.html"><span>Modules</span></a></li>
      <li><a href="annotated.html"><span>Data&#160;Structures</span></a></li>
      <li><a href="files.html"><span>Files</span></a></li>
      <li><a href="examples.html"><span>Examples</span></a></li>
      <li>
        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="search/mag_sel.png"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.png" alt=""/></a>
          </span>
        </div>
      </li>
    </ul>
  </div>
</div><!-- top -->
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
<a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(0)"><span class="SelectionMark">&#160;</span>All</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(1)"><span class="SelectionMark">&#160;</span>Data Structures</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(2)"><span class="SelectionMark">&#160;</span>Files</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(3)"><span class="SelectionMark">&#160;</span>Functions</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(4)"><span class="SelectionMark">&#160;</span>Variables</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(5)"><span class="SelectionMark">&#160;</span>Typedefs</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(6)"><span class="SelectionMark">&#160;</span>Macros</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(7)"><span class="SelectionMark">&#160;</span>Groups</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(8)"><span class="SelectionMark">&#160;</span>Pages</a></div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="headertitle">
<div class="title">vn100_windows_binary_async.c</div>  </div>
</div><!--header-->
<div class="contents">
<p>This example demonstrates configuring a VN-100 to output binary asynchronous messages and then displaying these received binary messages on a Windows machine.</p>
<h1><a class="anchor" id="runningVn100WindowsBinaryAsync"></a>
Running the Example</h1>
<ol type="1">
<li>On your Windows machine, open the appropriate project located under the directory <code>&lt;VectorNav C/C++ Library Root&gt;/examples/vn100_windows_binary_async</code>.<ul>
<li>If you are using Visual Studio 2008, open the project file <code>Vn100WindowsBinaryAsync.vcproj</code>.</li>
<li>If you are using Visual Studio 2010 or greater, open the project file <code>Vn100WindowsBinaryAsync.vcxproj</code>. Note, you may be prompted to upgrade the project file.</li>
</ul>
</li>
<li>Under the project listing in <code>Visual Studio</code>, open the file <code>Source Files/vn100_windows_binary_async.c</code> and change the connection defines <code>PORT_NAME</code> and <code>BAUDRATE</code> to the settings of your VN-100 sensor.</li>
<li>Now, right-click the project and select the option <code>Build</code>. Make sure the project builds correctly and the text <code>Build succeeded</code> appears in the bottom-left of <code>Visual Studio</code>.</li>
<li>With the project built, you can now run the program. However, to pause the console so you can see the program's output, it is recommended that you run the project by pressing <em>Ctrl + F5</em>.</li>
</ol>
<div class="fragment"><div class="line"><span class="preprocessor">#include &lt;stdio.h&gt;</span></div>
<div class="line"><span class="preprocessor">#include &lt;Windows.h&gt;</span></div>
<div class="line"><span class="preprocessor">#include &lt;tchar.h&gt;</span></div>
<div class="line"><span class="preprocessor">#include &quot;<a class="code" href="vectornav_8h.html">vectornav.h</a>&quot;</span></div>
<div class="line"></div>
<div class="line"><span class="comment">/* Change the connection settings to your configuration. */</span></div>
<div class="line"><span class="keyword">const</span> <span class="keywordtype">char</span>* <span class="keyword">const</span> COM_PORT = <span class="stringliteral">&quot;COM1&quot;</span>;</div>
<div class="line"><span class="keyword">const</span> <span class="keywordtype">int</span> BAUD_RATE = 115200;</div>
<div class="line"></div>
<div class="line"><span class="keywordtype">void</span> asyncDataListener(</div>
<div class="line">    <span class="keywordtype">void</span>* sender,</div>
<div class="line">    <a name="_a0"></a><a class="code" href="struct_vn_device_composite_data.html" title="Composite structure of the various asynchronous data VectorNav devices are capable of outputting...">VnDeviceCompositeData</a>* data);</div>
<div class="line"></div>
<div class="line"><span class="keywordtype">int</span> _tmain(<span class="keywordtype">int</span> argc, _TCHAR* argv[])</div>
<div class="line">{</div>
<div class="line">    <a class="code" href="vn__error_codes_8h.html#a2ab6e10832948454e3977ea34d483765">VN_ERROR_CODE</a> errorCode;</div>
<div class="line">    <a name="_a1"></a><a class="code" href="struct_vn100.html" title="Holds connection information for accessing a VN-100 device. ">Vn100</a> vn100;</div>
<div class="line"></div>
<div class="line">    errorCode = <a name="a2"></a><a class="code" href="vn100_8h.html#ac67c964aedc127f46a5b3e61b2269f19" title="Connects to a VectorNav VN-100 device. ">vn100_connect</a>(</div>
<div class="line">        &amp;vn100,</div>
<div class="line">        COM_PORT,</div>
<div class="line">        BAUD_RATE);</div>
<div class="line"></div>
<div class="line">    <span class="comment">/* Make sure the user has permission to use the COM port. */</span></div>
<div class="line">    <span class="keywordflow">if</span> (errorCode != <a name="a3"></a><a class="code" href="group___v_n___e_r_r_o_r___c_o_d_e.html#ga375de3d5056cfee0551d6b345b67b3ff">VNERR_NO_ERROR</a>)</div>
<div class="line">    {</div>
<div class="line">        printf(<span class="stringliteral">&quot;Error encountered when trying to connect to the sensor.\n&quot;</span>);</div>
<div class="line"></div>
<div class="line">        <span class="keywordflow">return</span> 0;</div>
<div class="line">    }</div>
<div class="line"></div>
<div class="line">    <span class="comment">/* Disable ASCII asynchronous messages since we want to demonstrate the</span></div>
<div class="line"><span class="comment">       the binary asynchronous messages. */</span></div>
<div class="line">    errorCode = <a name="a4"></a><a class="code" href="vn100_8h.html#afba3b4da721a15b6a23f74cd3e1293ef" title="Sets the values of the Asynchronous Data Output Type register. ">vn100_setAsynchronousDataOutputType</a>(</div>
<div class="line">        &amp;vn100,</div>
<div class="line">        <a name="a5"></a><a class="code" href="group___a_s_y_n_c___o_u_t_p_u_t_s.html#ga6da57ba771e6906f3641d1cf1bfa6a22">VNASYNC_OFF</a>,</div>
<div class="line">        <span class="keyword">true</span>);</div>
<div class="line"></div>
<div class="line">    <span class="comment">/* Now configure the binary messages output. Notice how the configuration</span></div>
<div class="line"><span class="comment">       flags can be joined using the binary OR. */</span></div>
<div class="line">    errorCode = <a name="a6"></a><a class="code" href="vn100_8h.html#af2c601742c5927fb20a78cb82d31d880" title="Sets the current configuration of the binary output register 1. Note that you do not have to provide ...">vn100_setBinaryOutput1Configuration</a>(</div>
<div class="line">        &amp;vn100,</div>
<div class="line">        <a name="a7"></a><a class="code" href="group___b_i_n_a_r_y___a_s_y_n_c___m_o_d_e_s.html#ga663775c07c8c5afb60321bd73c69d0a5">BINARY_ASYNC_MODE_SERIAL_1</a>,     <span class="comment">/* Data will be output on serial port 1. This should be the one we are connected to now. */</span></div>
<div class="line">        200,                            <span class="comment">/* Outputting binary data at 4 Hz (800 Hz on-board filter / 200 = 4 Hz). */</span></div>
<div class="line">        <a name="a8"></a><a class="code" href="group___b_g1___s_e_l_e_c_t_i_o_n_s.html#ga8e4ba6aa1b3b15d6e7ddb3ab21980a91">BG1_YPR</a> | <a name="a9"></a><a class="code" href="group___b_g1___s_e_l_e_c_t_i_o_n_s.html#ga3eacf1868be619233a45c14bf25bcdb2">BG1_ANGULAR_RATE</a> | <a name="a10"></a><a class="code" href="group___b_g1___s_e_l_e_c_t_i_o_n_s.html#ga8ce67127f7a01dc0fc204fbf56713087">BG1_ACCEL</a>,</div>
<div class="line">        <a name="a11"></a><a class="code" href="group___b_g3___s_e_l_e_c_t_i_o_n_s.html#gac794da09b449ebdcc5a82558dbc695cc">BG3_NONE</a>,</div>
<div class="line">        <a name="a12"></a><a class="code" href="group___b_g5___s_e_l_e_c_t_i_o_n_s.html#ga99c276ed34894dedb360a9fd6337972a">BG5_NONE</a>,</div>
<div class="line">        <span class="keyword">true</span>);</div>
<div class="line"></div>
<div class="line">    printf(<span class="stringliteral">&quot;Yaw, Pitch, Roll\n&quot;</span>);</div>
<div class="line"></div>
<div class="line">    <span class="comment">/* Now register to receive notifications when a new binary asynchronous</span></div>
<div class="line"><span class="comment">       packet is received. */</span></div>
<div class="line">    errorCode = <a name="a13"></a><a class="code" href="vn100_8h.html#ab4be3bb7fd28f01d1ecdacb6539e4e8a" title="Allows registering a function which will be called whenever a new asynchronous data packet is receive...">vn100_registerAsyncDataReceivedListener</a>(&amp;vn100, &amp;asyncDataListener);</div>
<div class="line"></div>
<div class="line">    <span class="comment">/* Sleep for 10 seconds. Data will be received by the asycDataListener</span></div>
<div class="line"><span class="comment">       during this time. */</span></div>
<div class="line">    Sleep(10000);</div>
<div class="line"></div>
<div class="line">    errorCode = <a name="a14"></a><a class="code" href="vn100_8h.html#a67c877bd778b2f315ce59f66ed42d099" title="Unregisters an already registered function for recieving notifications of when new asynchronous data ...">vn100_unregisterAsyncDataReceivedListener</a>(&amp;vn100, &amp;asyncDataListener);</div>
<div class="line">    </div>
<div class="line">    errorCode = <a name="a15"></a><a class="code" href="vn100_8h.html#ac5d243253fabebaa00ea8c8175e14b17" title="Disconnects from the VN-100 device and disposes of any internal resources. ">vn100_disconnect</a>(&amp;vn100);</div>
<div class="line">    </div>
<div class="line">    <span class="keywordflow">if</span> (errorCode != <a class="code" href="group___v_n___e_r_r_o_r___c_o_d_e.html#ga375de3d5056cfee0551d6b345b67b3ff">VNERR_NO_ERROR</a>)</div>
<div class="line">    {</div>
<div class="line">        printf(<span class="stringliteral">&quot;Error encountered when trying to disconnect from the sensor.\n&quot;</span>);</div>
<div class="line">        </div>
<div class="line">        <span class="keywordflow">return</span> 0;</div>
<div class="line">    }</div>
<div class="line"></div>
<div class="line">    <span class="keywordflow">return</span> 0;</div>
<div class="line">}</div>
<div class="line"></div>
<div class="line"><span class="keywordtype">void</span> asyncDataListener(<span class="keywordtype">void</span>* sender, <a class="code" href="struct_vn_device_composite_data.html" title="Composite structure of the various asynchronous data VectorNav devices are capable of outputting...">VnDeviceCompositeData</a>* data)</div>
<div class="line">{</div>
<div class="line">    printf(<span class="stringliteral">&quot;  %+#7.2f %+#7.2f %+#7.2f\n&quot;</span>,</div>
<div class="line">        data-&gt;<a name="a16"></a><a class="code" href="struct_vn_device_composite_data.html#a89640ce35f52e39f725d558765b1c115">ypr</a>.<a name="a17"></a><a class="code" href="struct_vn_ypr.html#a21cd490f6191f66678f55b4c242a10cf">yaw</a>,</div>
<div class="line">        data-&gt;<a class="code" href="struct_vn_device_composite_data.html#a89640ce35f52e39f725d558765b1c115">ypr</a>.<a name="a18"></a><a class="code" href="struct_vn_ypr.html#a34c057a0378030db67bd6a129f37d938">pitch</a>,</div>
<div class="line">        data-&gt;<a class="code" href="struct_vn_device_composite_data.html#a89640ce35f52e39f725d558765b1c115">ypr</a>.<a name="a19"></a><a class="code" href="struct_vn_ypr.html#a1d3228afa3a1d6773954f40c1e519eb9">roll</a>);</div>
<div class="line">}</div>
</div><!-- fragment --> </div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated on Wed Jun 11 2014 11:34:32 for VectorNav C/C++ Library by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/>
</a> 1.8.4
</small></address>
</body>
</html>
